(()=>{const e=e=>new Promise((t=>setTimeout(t,e))),t=async()=>(document.querySelector("div.jobs-search-results-list").scrollTo({top:5e3,left:0,behavior:"smooth"}),await e(1500),document.querySelectorAll("div.job-card-container")),o=async(t,o)=>{let i=t[o].getAttribute("data-job-id");document.querySelector(`div[data-job-id='${i}']`).click(),await e(1e3);let n=document.querySelector("span.jobs-unified-top-card__posted-date").innerText;document.querySelector("div.jobs-search__job-details--container").scrollTo({top:5e3,left:0,behavior:"smooth"}),await e(1e3);let a=document.querySelector("div.artdeco-entity-lockup__title a.link-without-visited-state");a?(a=a.href,a=a.replace("life","people"),a+="?keywords=recruitment%2Chuman%2Cseleccion%2Chumanos%2Creclutamiento%2Crecruiter"):a="None";let c=document.querySelector("div.jobs-box__html-content").innerText;c=c.split("\n"),c.forEach(((e,t)=>{""==e&&c.splice(t,1)}));let r=document.querySelector(`div[data-job-id='${i}'] div div a`).href,l=document.querySelector(`div[data-job-id='${i}'] div div div.artdeco-entity-lockup__title`).innerText,d=document.querySelector(`div[data-job-id='${i}'] div div div.artdeco-entity-lockup__subtitle`).innerText,s=document.querySelector(`div[data-job-id='${i}'] div div a div div img`);return s=s?s.src:"None",{jobId:i,jobLink:r,title:l,company:d,companyLogo:s,location:document.querySelector(`div[data-job-id='${i}'] div div div.artdeco-entity-lockup__caption`).innerText,howLong:n,description:c,companyLink:a}};chrome.runtime.onMessage.addListener((async(i,n,a)=>{if("init scrap"==i.message){let n=await(async i=>{let n=[];for(;;){let a=await t();for(let e=0;e<a.length&&!(n.length>=i);e++){let t=await o(a,e);n.push(t)}let c=document.querySelector("ul.artdeco-pagination__pages li.selected").innerText;c=Number(c);let r=document.querySelector(`ul.artdeco-pagination__pages li[data-test-pagination-page-btn='${c+1}'] button`);if(!(r&&n.length<i))break;r.click(),await e(2e3)}return n})(i.limit);chrome.runtime.sendMessage({message:"analyze companies",vacancies:n})}if("scrap company"==i.message){let t=i.vacancie;await(async t=>{for(await e(1e3);;){let e=document.querySelectorAll("section.org-people-profile-card");if(console.log(e),0==e.length){let e=document.querySelector("div.org-people__insights-container div div ul li button");console.log("Ejecucion"),console.log(e)}break}return"Hola primo"})(),console.log(t)}}))})();