(()=>{const e=e=>new Promise((a=>setTimeout(a,e))),a=async()=>{let[e]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});return e};chrome.runtime.onMessage.addListener((async(s,i,t)=>{if("search vacancies"==s.message){let i=await a(),t=(o=s.role,`https://www.linkedin.com/jobs/search/?currentJobId=3323312640&geoId=${s.contry}&keywords=${o}&refresh=true`);await chrome.tabs.update(s.activeTabId,{url:t}),console.log("Now we are scraping the linkedin page"),await e(5e3),chrome.tabs.sendMessage(i.id,{message:"init scrap",limit:s.limit})}var o;if("analyze companies"===s.message){let i=s.vacancies,t=await a();for(let a of i)"None"!=a.companyLink&&(await chrome.tabs.update(t.id,{url:a.companyLink}),await e(4e3),chrome.tabs.sendMessage(t.id,{message:"scrap company",vacancie:a}),await e(1e4));console.log(i)}}))})();